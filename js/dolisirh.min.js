"use strict";window.dolisirh||(window.dolisirh={},window.dolisirh.scriptsLoaded=!1),window.dolisirh.scriptsLoaded||(window.dolisirh.init=function(){window.dolisirh.load_list_script()},window.dolisirh.load_list_script=function(){if(!window.dolisirh.scriptsLoaded){let i=void 0,o=void 0;for(i in window.dolisirh)for(o in window.dolisirh[i].init&&window.dolisirh[i].init(),window.dolisirh[i])window.dolisirh[i]&&window.dolisirh[i][o]&&window.dolisirh[i][o].init&&window.dolisirh[i][o].init();window.dolisirh.scriptsLoaded=!0}},window.dolisirh.refresh=function(){let i=void 0,o=void 0;for(i in window.dolisirh)for(o in window.dolisirh[i].refresh&&window.dolisirh[i].refresh(),window.dolisirh[i])window.dolisirh[i]&&window.dolisirh[i][o]&&window.dolisirh[i][o].refresh&&window.dolisirh[i][o].refresh()},$(document).ready(window.dolisirh.init)),window.dolisirh.dashboard={},window.dolisirh.dashboard.init=function(){window.dolisirh.dashboard.event()},window.dolisirh.dashboard.event=function(){$(document).on("change",".add-dashboard-widget",window.dolisirh.dashboard.addDashBoardInfo),$(document).on("click",".close-dashboard-widget",window.dolisirh.dashboard.closeDashBoardInfo),$(document).on("click",".select-dataset-dashboard-info",window.dolisirh.dashboard.selectDatasetDashboardInfo)},window.dolisirh.dashboard.addDashBoardInfo=function(){var i=document.getElementById("dashBoardForm"),i=new FormData(i).get("boxcombo");let o="?";var t=$(".dashboard").find('input[name="token"]').val();document.URL.match(/\?/)&&(o="&"),$.ajax({url:document.URL+o+"action=adddashboardinfo&token="+t,type:"POST",processData:!1,data:JSON.stringify({dashboardWidgetName:i}),contentType:!1,success:function(){window.location.reload()},error:function(){}})},window.dolisirh.dashboard.closeDashBoardInfo=function(){let o=$(this);var i=o.attr("data-widgetname");let t="?";var n=$(".dashboard").find('input[name="token"]').val();document.URL.match(/\?/)&&(t="&"),$.ajax({url:document.URL+t+"action=closedashboardinfo&token="+n,type:"POST",processData:!1,data:JSON.stringify({dashboardWidgetName:i}),contentType:!1,success:function(i){o.closest(".box-flex-item").fadeOut(400),$(".add-widget-box").attr("style",""),$(".add-widget-box").html($(i).find(".add-widget-box").children())},error:function(){}})},window.dolisirh.dashboard.selectDatasetDashboardInfo=function(){var i=$("#search_userid").val(),o=$("#search_year").val(),t=$("#search_month").val();let n="?";var e=$(".dashboard").find('input[name="token"]').val();document.URL.match(/\?/)&&(n="&"),window.dolisirh.loader.display($(".fichecenter")),$.ajax({url:document.URL+n+"token="+e+"&search_userid="+i+"&search_year="+o+"&search_month="+t,type:"POST",processData:!1,contentType:!1,success:function(i){$(".fichecenter").replaceWith($(i).find(".fichecenter"))},error:function(){}})},window.dolisirh.task={},window.dolisirh.task.init=function(){window.dolisirh.task.event()},window.dolisirh.task.event=function(){$(document).on("click",".auto-fill-timespent",window.dolisirh.task.addTimeSpent),$(document).on("click",".auto-fill-timespent-project",window.dolisirh.task.divideTimeSpent),$(document).on("click",".show-only-favorite-tasks",window.dolisirh.task.showOnlyFavoriteTasks),$(document).on("click",".show-only-tasks-with-timespent",window.dolisirh.task.showOnlyTasksWithTimeSpent),$(document).on("click",".timespent-create",window.dolisirh.task.createTimeSpent),$(document).on("click",".toggleTaskFavorite",window.dolisirh.task.toggleTaskFavorite)},window.dolisirh.task.addTimeSpent=function(){var i=$(".non-consumed-time-minute").val(),o=$(".non-consumed-time-hour").val();$(".inputhour").val(""),$(".inputminute").val(""),$(this).closest(".duration").find(".inputhour").val(o),$(this).closest(".duration").find(".inputminute").val(i)},window.dolisirh.task.divideTimeSpent=function(){var i=$(this).closest(".project-line").attr("id");let o,t;var n=+$(".non-consumed-time-minute").val()+60*+$(".non-consumed-time-hour").val(),e=$("."+i).length;let d=parseInt(n/e);$(".inputhour").val(""),$(".inputminute").val(""),$("."+i).each(function(){t=parseInt(d/60),o=d%60,$(this).find(".inputhour").val(t),$(this).find(".inputminute").val(o)})},window.dolisirh.task.showOnlyFavoriteTasks=function(){var i=$(".id-container").find('input[name="token"]').val();let o="?";document.URL.match(/\?/)&&(o="&");let t;t=$(this).is(":checked")?1:0,$.ajax({url:document.URL+o+"action=showOnlyFavoriteTasks&token="+i,type:"POST",processData:!1,data:JSON.stringify({showOnlyFavoriteTasks:t}),contentType:!1,success:function(){window.location.reload()},error:function(){}})},window.dolisirh.task.showOnlyTasksWithTimeSpent=function(){var i=$(".id-container").find('input[name="token"]').val();let o="?";document.URL.match(/\?/)&&(o="&");let t;t=$(this).is(":checked")?1:0,$.ajax({url:document.URL+o+"action=showOnlyTasksWithTimeSpent&token="+i,type:"POST",processData:!1,data:JSON.stringify({showOnlyTasksWithTimeSpent:t}),contentType:!1,success:function(){window.location.reload()},error:function(){}})},window.dolisirh.task.createTimeSpent=function(){var i=$(this).attr("value"),o=$(this).closest(".timespent-add-modal").find(".timespent-container"),t=$("#tablelines3").find("tr[data-taskid="+i+"]").find("td[data-cell="+o.find(".timespent-cell").val()+"]"),n=o.find(".timespent-timestamp").val(),e=o.find(".timespent-datehour").val(),d=o.find(".timespent-datemin").val(),a=o.find(".timespent-comment").val(),s=o.find(".timespent-hour").val(),o=o.find(".timespent-min").val(),t=(window.dolisirh.loader.display($(this)),window.dolisirh.loader.display(t),$(".fiche").find('input[name="token"]').val());let r="?";document.URL.match(/\?/)&&(r="&"),$.ajax({url:document.URL+r+"action=addTimeSpent&token="+t,data:JSON.stringify({taskID:i,timestamp:n,datehour:e,datemin:d,comment:a,hour:s,min:o}),type:"POST",processData:!1,contentType:!1,success:function(i){$(".loader-spin").remove(),$(".wpeo-loader").removeClass("wpeo-loader"),$("#timespent").removeClass("modal-active"),$("#tablelines3").html($(i).find("#tablelines3"))},error:function(i){}})},window.dolisirh.task.toggleTaskFavorite=function(){let o=$(this).attr("value");var i=$('form[name="addtime"]').find('input[name="token"]').val();let t="?";document.URL.match(/\?/)&&(t="&"),$.ajax({url:document.URL+t+"action=toggleTaskFavorite&taskId="+o+"&token="+i,type:"POST",processData:!1,contentType:!1,success:function(){var i=$("#"+o);i.hasClass("fas")?(i.removeClass("fas"),i.addClass("far")):i.hasClass("far")&&(i.removeClass("far"),i.addClass("fas"))},error:function(i){}})};