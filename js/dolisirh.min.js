"use strict";window.dolisirh||(window.dolisirh={},window.dolisirh.scriptsLoaded=!1),window.dolisirh.scriptsLoaded||(window.dolisirh.init=function(){window.dolisirh.load_list_script()},window.dolisirh.load_list_script=function(){if(!window.dolisirh.scriptsLoaded){let i=void 0,t=void 0;for(i in window.dolisirh)for(t in window.dolisirh[i].init&&window.dolisirh[i].init(),window.dolisirh[i])window.dolisirh[i]&&window.dolisirh[i][t]&&window.dolisirh[i][t].init&&window.dolisirh[i][t].init();window.dolisirh.scriptsLoaded=!0}},window.dolisirh.refresh=function(){let i=void 0,t=void 0;for(i in window.dolisirh)for(t in window.dolisirh[i].refresh&&window.dolisirh[i].refresh(),window.dolisirh[i])window.dolisirh[i]&&window.dolisirh[i][t]&&window.dolisirh[i][t].refresh&&window.dolisirh[i][t].refresh()},$(document).ready(window.dolisirh.init)),window.dolisirh.dashboard={},window.dolisirh.dashboard.init=function(){window.dolisirh.dashboard.event()},window.dolisirh.dashboard.event=function(){$(document).on("change",".add-dashboard-widget",window.dolisirh.dashboard.addDashBoardInfo),$(document).on("click",".close-dashboard-widget",window.dolisirh.dashboard.closeDashBoardInfo),$(document).on("click",".select-dataset-dashboard-info",window.dolisirh.dashboard.selectDatasetDashboardInfo)},window.dolisirh.dashboard.addDashBoardInfo=function(){var i=document.getElementById("dashBoardForm"),i=new FormData(i).get("boxcombo");let t="?";var o=$(".dashboard").find('input[name="token"]').val();document.URL.match(/\?/)&&(t="&"),$.ajax({url:document.URL+t+"action=adddashboardinfo&token="+o,type:"POST",processData:!1,data:JSON.stringify({dashboardWidgetName:i}),contentType:!1,success:function(){window.location.reload()},error:function(){}})},window.dolisirh.dashboard.closeDashBoardInfo=function(){let t=$(this);var i=t.attr("data-widgetname");let o="?";var n=$(".dashboard").find('input[name="token"]').val();document.URL.match(/\?/)&&(o="&"),$.ajax({url:document.URL+o+"action=closedashboardinfo&token="+n,type:"POST",processData:!1,data:JSON.stringify({dashboardWidgetName:i}),contentType:!1,success:function(i){t.closest(".box-flex-item").fadeOut(400),$(".add-widget-box").attr("style",""),$(".add-widget-box").html($(i).find(".add-widget-box").children())},error:function(){}})},window.dolisirh.dashboard.selectDatasetDashboardInfo=function(){var i=$("#search_userid").val(),t=$("#search_year").val(),o=$("#search_month").val();let n="?";var e=$(".dashboard").find('input[name="token"]').val();document.URL.match(/\?/)&&(n="&"),window.dolisirh.loader.display($(".fichecenter")),$.ajax({url:document.URL+n+"token="+e+"&search_userid="+i+"&search_year="+t+"&search_month="+o,type:"POST",processData:!1,contentType:!1,success:function(i){$(".fichecenter").replaceWith($(i).find(".fichecenter"))},error:function(){}})},window.dolisirh.task={},window.dolisirh.task.init=function(){window.dolisirh.task.event()},window.dolisirh.task.event=function(){$(document).on("click",".auto-fill-timespent",window.dolisirh.task.addTimeSpent),$(document).on("click",".auto-fill-timespent-project",window.dolisirh.task.divideTimeSpent),$(document).on("click",".show-only-favorite-tasks",window.dolisirh.task.showOnlyFavoriteTasks),$(document).on("click",".show-only-tasks-with-timespent",window.dolisirh.task.showOnlyTasksWithTimeSpent),$(document).on("click",".timespent-create",window.dolisirh.task.createTimeSpent),$(document).on("click",".toggleTaskFavorite",window.dolisirh.task.toggleTaskFavorite)},window.dolisirh.task.addTimeSpent=function(){var i=$(".non-consumed-time-minute").val(),t=$(".non-consumed-time-hour").val();$(".inputhour").val(""),$(".inputminute").val(""),$(this).closest(".duration").find(".inputhour").val(t),$(this).closest(".duration").find(".inputminute").val(i)},window.dolisirh.task.divideTimeSpent=function(){var i=$(this).closest(".project-line").attr("id");let t,o;var n=+$(".non-consumed-time-minute").val()+60*+$(".non-consumed-time-hour").val(),e=$("."+i).length;let a=parseInt(n/e);$(".inputhour").val(""),$(".inputminute").val(""),$("."+i).each(function(){o=parseInt(a/60),t=a%60,$(this).find(".inputhour").val(o),$(this).find(".inputminute").val(t)})},window.dolisirh.task.showOnlyFavoriteTasks=function(){var i=$(".id-container").find('input[name="token"]').val();let t="?";document.URL.match(/\?/)&&(t="&");let o;o=$(this).is(":checked")?1:0,$.ajax({url:document.URL+t+"action=show_only_favorite_tasks&token="+i,type:"POST",processData:!1,data:JSON.stringify({showOnlyFavoriteTasks:o}),contentType:!1,success:function(){window.location.reload()},error:function(){}})},window.dolisirh.task.showOnlyTasksWithTimeSpent=function(){var i=$(".id-container").find('input[name="token"]').val();let t="?";document.URL.match(/\?/)&&(t="&");let o;o=$(this).is(":checked")?1:0,$.ajax({url:document.URL+t+"action=show_only_tasks_with_timespent&token="+i,type:"POST",processData:!1,data:JSON.stringify({showOnlyTasksWithTimeSpent:o}),contentType:!1,success:function(){window.location.reload()},error:function(){}})},window.dolisirh.task.createTimeSpent=function(){var i=$(this).attr("value"),t=$(this).closest(".timespent-add-modal").find(".timespent-container"),o=t.find(".timespent-timestamp").val(),n=t.find(".timespent-datehour").val(),e=t.find(".timespent-datemin").val(),a=t.find(".timespent-comment").val(),d=t.find(".timespent-hour").val(),t=t.find(".timespent-min").val(),s=(window.saturne.loader.display($(this)),$(".fiche").find('input[name="token"]').val());let r="?";document.URL.match(/\?/)&&(r="&"),$.ajax({url:document.URL+r+"action=add_timespent&token="+s,data:JSON.stringify({taskID:i,timestamp:o,datehour:n,datemin:e,comment:a,hour:d,min:t}),type:"POST",processData:!1,contentType:!1,success:function(i){$(".loader-spin").remove(),$(".wpeo-loader").removeClass("wpeo-loader"),$("#timespent").removeClass("modal-active"),$("#tablelines3").html($(i).find("#tablelines3"))},error:function(i){}})},window.dolisirh.task.toggleTaskFavorite=function(){let t=$(this).attr("value");var i=$('form[name="addtime"]').find('input[name="token"]').val();let o="?";document.URL.match(/\?/)&&(o="&"),$.ajax({url:document.URL+o+"action=toggleTaskFavorite&taskId="+t+"&token="+i,type:"POST",processData:!1,contentType:!1,success:function(){var i=$("#"+t);i.hasClass("fas")?(i.removeClass("fas"),i.addClass("far")):i.hasClass("far")&&(i.removeClass("far"),i.addClass("fas"))},error:function(i){}})},window.saturne.modal.addMoreOpenModalData=function(i,t){var t=t.find(".timespent"),o=t.attr("data-task-id"),n=t.attr("data-timestamp"),e=t.attr("data-cell"),t=t.attr("data-date");$(".timespent-taskid").val(o),$(".timespent-timestamp").val(n),$(".timespent-cell").val(e),$(".timespent-create").attr("value",o),$(".timespent-date").html(t)};